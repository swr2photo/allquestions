<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>แบบทดสอบความรักของคุณ</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
            background-color: #f0f2f5;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }
        #quiz {
            max-width: 400px;
            width: 90%;
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
        }
        button {
            display: block;
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            font-size: 18px;
            cursor: pointer;
            border: none;
            border-radius: 8px;
            background: #007bff;
            color: white;
            transition: 0.3s;
        }
        button:hover {
            background: #0056b3;
        }
        #resultImage {
            width: 100%;
            max-width: 400px;
            display: none;
            margin-top: 20px;
            border-radius: 12px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
        }
        #downloadBtn, #shareBtn {
            width: 80%;
            max-width: 300px;
            margin-top: 20px;
            display: none;
        }
    </style>
</head>
<body>
    <div id="quiz">
        <h1>แบบทดสอบความรักของคุณ</h1>
        <p id="question">กำลังโหลดคำถาม...</p>
        <button onclick="submitAnswer(0)" id="btn1"></button>
        <button onclick="submitAnswer(1)" id="btn2"></button>
        <button onclick="submitAnswer(2)" id="btn3"></button>
        <button onclick="submitAnswer(3)" id="btn4" style="display: none;"></button>
    </div>

    <img id="resultImage" alt="ผลลัพธ์">
    <a id="downloadBtn" download="result.png">ดาวน์โหลดภาพ</a>
    <button id="shareBtn" onclick="alert('เปิด Instagram และอัปโหลดภาพด้วยตัวเอง')">แชร์ลง IG Story</button>

    <script>
        const questions = [
            { q: "เมื่อคุณชอบใครสักคน คุณจะ?", a: ["แสดงออกทันที", "เก็บไว้เงียบๆ", "ส่งสัญญาณเล็กน้อย", "รอให้เขามาชอบก่อน"] },
            { q: "วันวาเลนไทน์ในฝันของคุณคือ?", a: ["ดินเนอร์ใต้แสงเทียน", "ดูหนังที่บ้าน", "ออกไปผจญภัย", "ทำอะไรที่แปลกใหม่"] },
            { q: "ของขวัญที่คุณอยากได้มากที่สุด?", a: ["ดอกไม้", "จดหมายรัก", "ของที่มีความหมาย", "เซอร์ไพรส์สุดพิเศษ"] },
            { q: "คุณมองว่าความรักคือ?", a: ["ความโรแมนติก", "ความเข้าใจ", "มิตรภาพ", "การผจญภัย"] },
            { q: "คุณชอบฟังเพลงรักแบบไหน?", a: ["หวานซึ้ง", "เศร้าๆ", "อบอุ่น", "ตื่นเต้นเร้าใจ"] }
        ];

        const results = [
            { type: "โรแมนติก", description: "คุณเป็นคนที่ชอบความรักแบบคลาสสิก ดอกไม้ เทียน และคำหวาน" },
            { type: "อบอุ่น", description: "คุณมองว่าความรักเป็นเรื่องของความเข้าใจและการอยู่ร่วมกัน" },
            { type: "มิตรภาพ", description: "คุณเชื่อว่าความรักที่ดีที่สุดคือการเป็นเพื่อนกันก่อน" },
            { type: "ผจญภัย", description: "คุณมองหาความรักที่ไม่ซ้ำใคร ตื่นเต้น และมีสีสัน!" }
        ];

        let currentQuestion = 0;
        let scores = [0, 0, 0, 0];

        function loadQuestion() {
            if (currentQuestion >= questions.length) {
                showResult();
                return;
            }
            document.getElementById("question").innerText = questions[currentQuestion].q;
            document.getElementById("btn1").innerText = questions[currentQuestion].a[0];
            document.getElementById("btn2").innerText = questions[currentQuestion].a[1];
            document.getElementById("btn3").innerText = questions[currentQuestion].a[2];
            if (questions[currentQuestion].a.length > 3) {
                document.getElementById("btn4").innerText = questions[currentQuestion].a[3];
                document.getElementById("btn4").style.display = "block";
            } else {
                document.getElementById("btn4").style.display = "none";
            }
        }

        function submitAnswer(choice) {
            scores[choice]++;
            currentQuestion++;
            loadQuestion();
        }

        function showResult() {
            let maxScore = Math.max(...scores);
            let resultIndex = scores.indexOf(maxScore);
            let resultText = `สไตล์ความรักของคุณคือ: ${results[resultIndex].type}\n${results[resultIndex].description}`;

            let canvas = document.createElement("canvas");
            canvas.width = 1080;
            canvas.height = 1920;
            let ctx = canvas.getContext("2d");
            ctx.fillStyle = "#fff";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = "#000";
            ctx.font = "60px Arial";
            ctx.fillText(resultText, 100, 400);

            let imgElement = document.getElementById("resultImage");
            let imageData = canvas.toDataURL("image/png");
            imgElement.src = imageData;
            imgElement.style.display = "block";

            let downloadBtn = document.getElementById("downloadBtn");
            downloadBtn.href = imageData;
            downloadBtn.style.display = "block";

            document.getElementById("shareBtn").style.display = "block";
        }

        loadQuestion();
    </script>
</body>
</html>
