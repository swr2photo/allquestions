<!DOCTYPE html>
<html lang="th">
<head>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <link rel="icon" href="/api/placeholder/32/32" alt="logo">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Allquiz เว็บไซต์เฉลยคำตอบรายวิชาต่างๆ">
  <meta property="og:title" content="Allquiz - เฉลยคำตอบรายวิชา">
  <meta property="og:description" content="เว็บไซต์ Allquiz ที่ให้บริการเฉลยคำตอบในรายวิชาต่างๆ สำหรับนักศึกษาและผู้ที่ต้องการคำแนะนำในการศึกษา">
  <meta property="og:image" content="image/logo.png">
  <meta property="og:url" content="https://www.instagram.com/doralaikon_th/">
  <meta property="og:type" content="website">
  <title>Allquiz - Home</title>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    /* Responsive Enhancement */
    :root {
      --primary-color: #7C4DFF;
      --secondary-color: #651FFF;
      --dark-color: #212121;
      --light-color: #F5F5F5;
      --accent-color: #FF4081;
      --success-color: #4CAF50;
      --warning-color: #FFC107;
      --danger-color: #FF5252;
      --info-color: #2196F3;
      --navbar-height: 70px;
      --card-radius: 16px;
      --button-radius: 30px;
      --element-spacing: 15px;
      --shadow-light: 0 5px 15px rgba(0, 0, 0, 0.05);
      --shadow-medium: 0 8px 20px rgba(0, 0, 0, 0.1);
      --shadow-dark: 0 12px 28px rgba(0, 0, 0, 0.15);
      --transition-speed: 0.3s;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      -webkit-user-select: none;
      user-select: none;
      font-family: 'Kanit', sans-serif;
      background-color: #f9f9f9;
      color: #333;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* สไตล์การแสดงสกอล์เมาส์ */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--primary-color);
      border-radius: 10px;
      transition: background-color 0.3s ease;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--secondary-color);
    }

    /* Navbar */
    .navbar {
      background: linear-gradient(135deg, var(--dark-color), #424242);
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 20px;
      height: var(--navbar-height);
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1000;
    }

    .navbar-brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .navbar-brand img {
      height: 40px;
      width: auto;
    }

    .navbar-brand h1 {
      font-size: 1.8rem;
      font-weight: 600;
      color: white;
      margin: 0;
    }

    .navbar-menu {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .navbar-item {
      color: rgba(255, 255, 255, 0.8);
      text-decoration: none;
      font-size: 1.1rem;
      padding: 8px 12px;
      border-radius: 4px;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .navbar-item:hover, .navbar-item.active {
      color: white;
      background-color: rgba(255, 255, 255, 0.1);
    }

    .navbar-item i {
      margin-right: 5px;
    }

    /* Popup Overlay */
    .popup-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      z-index: 1000;
      display: flex;
      justify-content: center;
      align-items: center;
      animation: fadeIn 0.5s ease-in-out;
      overflow: auto;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    /* Popup Content */
    .popup-content {
      position: relative;
      text-align: center;
      width: 90%;
      max-width: 450px;
      background: #2c2c2c;
      border-radius: 15px;
      box-shadow: 0px 8px 30px rgba(0, 0, 0, 0.6);
      color: #e0e0e0;
      max-height: 80%;
      overflow-y: auto;
      animation: slideUp 0.5s ease-out;
    }

    @keyframes slideUp {
      from { transform: translateY(30px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .popup-header {
      background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
      padding: 15px;
      border-radius: 15px 15px 0 0;
      color: #fff;
      font-size: 20px;
      font-weight: bold;
    }

    .popup-content h1 {
      font-size: 22px;
      color: #ffcc00;
      margin: 15px 0 10px;
    }

    .popup-content p {
      font-size: 16px;
      line-height: 1.8;
      margin: 15px 25px;
      color: #e0e0e0;
    }

    .popup-content .update-time {
      font-size: 12px;
      color: #8d8d8d;
      margin-bottom: 15px;
    }

    .popup-content .btn {
      padding: 12px 25px;
      font-size: 16px;
      color: #fff;
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
      border: none;
      border-radius: 30px;
      cursor: pointer;
      transition: all 0.3s ease;
      margin: 10px 0 30px;
      font-weight: 500;
      box-shadow: 0 4px 12px rgba(124, 77, 255, 0.3);
    }

    .popup-content .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(124, 77, 255, 0.4);
    }

    .popup-content .close-btn {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 24px;
      color: rgba(255, 255, 255, 0.8);
      cursor: pointer;
      transition: color 0.3s ease;
      z-index: 10;
    }

    .popup-content .close-btn:hover {
      color: var(--danger-color);
    }

    .popup-footer {
      background: linear-gradient(90deg, var(--info-color), #03A9F4);
      padding: 12px;
      border-radius: 0 0 15px 15px;
      color: #fff;
      font-size: 14px;
    }

    /* Container for main content */
    .main-container {
      margin-top: calc(var(--navbar-height) + 20px);
      padding: 20px;
      flex: 1;
    }

    /* Section styles */
    section {
      max-width: 1200px;
      margin: 0 auto 30px;
      padding: 20px;
      background-color: #fff;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .section-title {
      text-align: center;
      font-size: 1.8rem;
      font-weight: 600;
      color: var(--dark-color);
      margin-bottom: 30px;
      position: relative;
      padding-bottom: 15px;
    }

    .section-title::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 4px;
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
      border-radius: 10px;
    }

    /* Subject and Quiz Card Redesign - Grid Layout */
    .subject-list, .quiz-list {
      display: grid;
      grid-template-columns: repeat(4, 1fr); /* 4 cards per row on desktop */
      gap: var(--element-spacing);
      margin-top: 30px;
    }

    .subject-card, .quiz-card {
      background-color: #fff;
      border-radius: var(--card-radius);
      padding: 25px 20px;
      text-align: center;
      cursor: pointer;
      transition: all var(--transition-speed) ease;
      box-shadow: var(--shadow-light);
      border: 1px solid #eee;
      display: flex;
      flex-direction: column;
      height: 100%;
      position: relative;
      overflow: hidden;
      min-height: 200px; /* Fixed minimum height */
      aspect-ratio: 1 / 1; /* Square aspect ratio */
    }

    .subject-card::before, .quiz-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 5px;
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
      transform: scaleX(0);
      transform-origin: left;
      transition: transform var(--transition-speed) ease;
    }

    .subject-card:hover::before, .quiz-card:hover::before {
      transform: scaleX(1);
    }

    .subject-card:hover, .quiz-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-medium);
      border-color: var(--primary-color);
    }

    .subject-card i, .quiz-card i {
      font-size: 2.5rem;
      margin-bottom: 15px;
      color: var(--primary-color);
      transition: transform var(--transition-speed) ease;
    }

    .subject-card:hover i, .quiz-card:hover i {
      transform: scale(1.1);
    }

    .subject-card strong, .quiz-card strong {
      font-size: 1.3rem;
      color: var(--dark-color);
      display: block;
      margin-bottom: 10px;
    }

    /* Enhanced Time Display */
    .waiting-for-update, .quiz-count {
      color: #fff;
      background-color: var(--warning-color);
      padding: 8px 15px;
      border-radius: var(--button-radius);
      font-weight: 500;
      font-size: 0.9rem;
      display: inline-block;
      margin-top: 15px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }
    
    .quiz-count {
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
    }

    .status {
      display: inline-block;
      font-weight: 500;
      color: #fff;
      padding: 8px 15px;
      border-radius: var(--button-radius);
      margin: 15px 0;
      text-transform: uppercase;
      font-size: 0.9rem;
      letter-spacing: 0.5px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .status.waiting-for-update {
      background-color: var(--warning-color);
    }

    .status.expired {
      background: linear-gradient(to right, #FF5252, #FF1744);
    }

    .status.success {
      background: linear-gradient(to right, #4CAF50, #2E7D32);
    }

    .countdown {
      color: var(--dark-color);
      font-size: 0.95rem;
      margin: 15px 0;
      font-weight: 500;
      background-color: #f5f5f5;
      padding: 12px;
      border-radius: var(--button-radius);
      display: inline-block;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
      border: 1px solid #eee;
      position: relative;
      overflow: hidden;
    }
    
    .countdown::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 5px;
      height: 100%;
      background: linear-gradient(to bottom, var(--primary-color), var(--secondary-color));
    }
    
    .countdown i {
      margin-right: 8px;
      color: var(--primary-color);
    }

    .quiz-description {
      background-color: #f9f9f9;
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
      font-size: 0.95rem;
      color: #555;
      text-align: left;
      flex: 1;
      border: 1px solid #eee;
    }

    .answer-button {
      display: inline-block;
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
      color: white;
      padding: 8px 16px;
      border-radius: var(--button-radius);
      text-decoration: none;
      font-weight: 500;
      font-size: 0.9rem;
      margin-top: 15px;
      transition: all 0.3s ease;
      border: none;
      cursor: pointer;
      box-shadow: 0 3px 8px rgba(124, 77, 255, 0.25);
    }

    .answer-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(124, 77, 255, 0.35);
    }
    
    .answer-button i {
      font-size: 0.85rem;
      margin-right: 5px;
    }

    .back-button {
      display: inline-block;
      background-color: #424242;
      color: white;
      padding: 12px 25px;
      border-radius: 30px;
      text-align: center;
      margin: 20px auto;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 500;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .back-button:hover {
      background-color: #333;
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
    }

    /* Notification System */
    #notification-center {
      position: fixed;
      top: var(--navbar-height);
      right: 0;
      width: 350px;
      max-height: calc(100vh - var(--navbar-height));
      background-color: white;
      box-shadow: -3px 3px 15px rgba(0, 0, 0, 0.1);
      z-index: 999;
      overflow-y: auto;
      transform: translateX(100%);
      transition: transform 0.3s ease;
      border-radius: 0 0 0 15px;
    }

    #notification-center.active {
      transform: translateX(0);
    }

    .notification-header {
      background: linear-gradient(135deg, var(--dark-color), #424242);
      color: white;
      padding: 15px;
      font-size: 1.2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .notification-header h3 {
      margin: 0;
      font-size: 1.2rem;
    }

    .notification-close {
      background: none;
      border: none;
      color: white;
      font-size: 1.2rem;
      cursor: pointer;
    }

    .notification-tabs {
      display: flex;
      border-bottom: 1px solid #eee;
    }

    .notification-tab {
      flex: 1;
      padding: 12px;
      text-align: center;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      color: #777;
      background-color: #f9f9f9;
    }

    .notification-tab.active {
      background-color: white;
      color: var(--primary-color);
      border-bottom: 3px solid var(--primary-color);
    }

    .notification-content {
      padding: 15px;
    }

    .notification-section {
      margin-bottom: 15px;
    }

    .notification-section-title {
      font-size: 1rem;
      font-weight: 500;
      margin-bottom: 10px;
      color: #555;
      padding-bottom: 5px;
      border-bottom: 1px solid #eee;
    }

    .notification-list {
      list-style: none;
    }

    .notification-item {
      margin-bottom: 15px;
      padding: 12px;
      border-radius: 10px;
      transition: all 0.3s ease;
      position: relative;
    }

    .notification-item:hover {
      transform: translateX(5px);
    }

    .notification-item.expiry {
      background-color: rgba(255, 82, 82, 0.1);
      border-left: 3px solid var(--danger-color);
    }

    .notification-item.update {
      background-color: rgba(76, 175, 80, 0.1);
      border-left: 3px solid var(--success-color);
    }

    .notification-title {
      font-weight: 500;
      margin-bottom: 5px;
      font-size: 0.95rem;
      color: #333;
    }

    .notification-desc {
      font-size: 0.85rem;
      color: #666;
      margin-bottom: 8px;
    }

    .notification-link {
      font-size: 0.85rem;
      color: var(--primary-color);
      text-decoration: none;
      display: inline-block;
      font-weight: 500;
    }

    .notification-link:hover {
      text-decoration: underline;
    }

    .notification-icon {
      margin-right: 8px;
      color: inherit;
    }

    .notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background-color: var(--primary-color);
      color: white;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      font-weight: bold;
    }

    /* Footer styles */
    footer {
      background: linear-gradient(135deg, var(--dark-color), #424242);
      color: white;
      padding: 30px 20px;
      text-align: center;
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 30px;
    }

    .footer-section {
      flex: 1;
      min-width: 200px;
    }

    .footer-section h3 {
      font-size: 1.2rem;
      margin-bottom: 15px;
      position: relative;
      padding-bottom: 10px;
    }

    .footer-section h3::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: 0;
      width: 50px;
      height: 3px;
      background: var(--primary-color);
      border-radius: 3px;
    }

    .footer-section p {
      color: rgba(255, 255, 255, 0.7);
      font-size: 0.9rem;
      line-height: 1.6;
    }

    .footer-section ul {
      list-style: none;
    }

    .footer-section ul li {
      margin-bottom: 10px;
    }

    .footer-section ul li a {
      color: rgba(255, 255, 255, 0.7);
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .footer-section ul li a:hover {
      color: white;
    }

    .social-icons {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .social-icons a {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      color: white;
      transition: all 0.3s ease;
    }

    .social-icons a:hover {
      background-color: var(--primary-color);
      transform: translateY(-3px);
    }

    .footer-bottom {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.6);
    }

    /* No Notifications */
    .no-notifications {
      padding: 30px 15px;
      text-align: center;
      color: #777;
      font-size: 0.9rem;
    }

    .no-notifications i {
      font-size: 3rem;
      color: #ddd;
      margin-bottom: 15px;
      display: block;
    }

    /* Responsive Enhancement - Adjusted Grid Layout */
    @media (max-width: 1200px) {
      .main-container {
        padding: 15px;
      }
      
      section {
        padding: 15px;
      }
      
      .subject-list, .quiz-list {
        grid-template-columns: repeat(3, 1fr); /* 3 cards per row */
        gap: 20px;
      }
      
      .subject-card, .quiz-card {
        min-height: 180px;
      }
    }
    
    @media (max-width: 992px) {
      .navbar-brand h1 {
        font-size: 1.6rem;
      }
      
      .navbar-menu {
        gap: 15px;
      }
      
      .section-title {
        font-size: 1.6rem;
      }
      
      .footer-content {
        gap: 20px;
      }
      
      .subject-list, .quiz-list {
        grid-template-columns: repeat(2, 1fr); /* 2 cards per row */
      }
      
      .subject-card, .quiz-card {
        min-height: 160px;
      }
    }

    @media (max-width: 768px) {
      :root {
        --navbar-height: 60px;
      }
      
      .navbar {
        padding: 0 15px;
      }

      .navbar-brand h1 {
        font-size: 1.4rem;
      }

      .navbar-menu {
        gap: 8px;
      }

      .navbar-item {
        font-size: 0.9rem;
        padding: 8px;
      }
      
      .navbar-item i {
        margin-right: 3px;
      }

      .section-title {
        font-size: 1.5rem;
        margin-bottom: 20px;
      }

      .subject-list, .quiz-list {
        grid-template-columns: repeat(2, 1fr); /* 2 cards per row */
        gap: 15px;
      }

      .subject-card, .quiz-card {
        padding: 20px 15px;
        min-height: 180px;
        aspect-ratio: auto; /* Remove fixed aspect ratio on smaller screens */
      }
      
      .subject-card i, .quiz-card i {
        font-size: 2rem;
        margin-bottom: 10px;
      }
      
      .subject-card strong, .quiz-card strong {
        font-size: 1.1rem;
      }

      #notification-center {
        width: 300px;
      }

      .footer-content {
        flex-direction: column;
        gap: 20px;
      }
      
      .popup-content {
        width: 95%;
        max-width: 400px;
      }
      
      .popup-content h1 {
        font-size: 20px;
      }
      
      .popup-content p {
        font-size: 14px;
      }
    }

    @media (max-width: 576px) {
      :root {
        --navbar-height: 55px;
        --card-radius: 12px;
        --button-radius: 20px;
      }
      
      .navbar-brand h1 {
        font-size: 1.2rem;
      }
      
      .navbar-brand img {
        height: 30px;
      }

      .navbar-menu {
        gap: 5px;
      }

      .navbar-item {
        font-size: 0.8rem;
        padding: 6px;
      }
      
      .navbar-item span {
        display: none;
      }
      
      .navbar-item i {
        margin-right: 0;
        font-size: 1.1rem;
      }

      .subject-list, .quiz-list {
        grid-template-columns: 1fr; /* 1 card per row on mobile */
        gap: 12px;
      }
      
      .subject-card, .quiz-card {
        margin: 0 auto;
        max-width: 100%;
        min-height: 150px;
        padding: 15px 10px;
      }
      
      .answer-button {
        padding: 6px 12px;
        font-size: 0.85rem;
      }

      #notification-center {
        width: 100%;
      }

      .section-title {
        font-size: 1.3rem;
      }
      
      .popup-content h1 {
        font-size: 18px;
      }
      
      .popup-content p {
        font-size: 13px;
      }
      
      .popup-content .btn {
        font-size: 14px;
        padding: 10px 20px;
      }
    }

    /* Animation keyframes */
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    .pulse {
      animation: pulse 2s infinite;
    }

    /* Bell notification animation */
    @keyframes bellRing {
      0% { transform: rotate(0); }
      10% { transform: rotate(15deg); }
      20% { transform: rotate(-15deg); }
      30% { transform: rotate(15deg); }
      40% { transform: rotate(-15deg); }
      50% { transform: rotate(0); }
      100% { transform: rotate(0); }
    }

    .bell-ring {
      animation: bellRing 1s ease;
    }

    .notification-badge-count {
      position: absolute;
      top: 10px;
      right: 5px;
      background-color: var(--danger-color);
      color: white;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar">
    <div class="navbar-brand">
      <img src="/api/placeholder/40/40" alt="Allquiz Logo">
      <h1>Allquiz</h1>
    </div>
    <div class="navbar-menu">
      <a href="#" class="navbar-item active"><i class="fas fa-home"></i> <span>หน้าหลัก</span></a>
      <a href="#" class="navbar-item"><i class="fas fa-user-graduate"></i> <span>วิชาทั้งหมด</span></a>
      <a href="#" class="navbar-item"><i class="fas fa-info-circle"></i> <span>เกี่ยวกับเรา</span></a>
      <div class="navbar-item" id="notification-toggle" onclick="toggleNotificationCenter()">
        <i class="fas fa-bell"></i>
        <span class="notification-badge-count" id="notification-badge">0</span>
      </div>
    </div>
  </nav>

  <!-- Notification Center -->
  <div id="notification-center">
    <div class="notification-header">
      <h3>การแจ้งเตือน</h3>
      <button class="notification-close" onclick="toggleNotificationCenter()"><i class="fas fa-times"></i></button>
    </div>
    <div class="notification-tabs">
      <div class="notification-tab active" data-tab="all">ทั้งหมด</div>
      <div class="notification-tab" data-tab="expiry">กำลังหมดเวลา</div>
      <div class="notification-tab" data-tab="update">อัพเดตล่าสุด</div>
    </div>
    <div class="notification-content" id="notification-content">
      <!-- Notification content will be loaded here by JS -->
    </div>
  </div>

  <!-- Popup Announcement -->
  <div class="popup-overlay" id="popup-overlay">
    <div class="popup-content">
      <div class="popup-header">ธรรมชาติบำบัด- ประกาศสำคัญ</div>
      <span class="close-btn" id="close-popup">&times;</span>
      <h1>ข้อสอบปลายภาค 20 คะแนน <br> </h1>
      <p>
        นักศึกษามีสิทธิเข้าระบบเพื่อทำข้อสอบได้ครั้งเดียว ครั้งที่สองจะไม่มีสิทธิทำข้อสอบ<br>
      </p>
      <p class="update-time">Updated: 19 มีนาคม 2568</p>
      <button class="btn" id="start-redirect">เปิดทำข้อสอบ</button>
      <div class="popup-footer">© doralaikon | PSU</div>
    </div>
  </div>

  <!-- Main Container -->
  <div class="main-container">
    <section id="subjects">
      <h2 class="section-title">เลือกวิชา</h2>
      <div class="subject-list" id="subject-list"></div>
    </section>

    <section id="quiz-list" style="display: none;">
      <h2 class="section-title" id="subject-title">วิชา</h2>
      <div class="quiz-list" id="quiz-container"></div>
      <div class="back-button" id="back-button">
        <i class="fas fa-arrow-left"></i> ย้อนกลับ
      </div>
    </section>
  </div>

  <!-- Footer -->
  <footer>
    <div class="footer-content">
      <div class="footer-section">
        <h3>เกี่ยวกับเรา</h3>
        <p>Allquiz เป็นเว็บไซต์ที่ให้บริการเฉลยคำตอบในรายวิชาต่างๆ สำหรับนักศึกษาและผู้ที่ต้องการคำแนะนำในการศึกษา</p>
        <div class="social-icons">
          <a href="#"><i class="fab fa-facebook-f"></i></a>
          <a href="#"><i class="fab fa-instagram"></i></a>
          <a href="#"><i class="fab fa-twitter"></i></a>
          <a href="#"><i class="fab fa-line"></i></a>
        </div>
      </div>
      <div class="footer-section">
        <h3>ลิงก์ด่วน</h3>
        <ul>
          <li><a href="#">หน้าหลัก</a></li>
          <li><a href="#">วิชาทั้งหมด</a></li>
          <li><a href="#">วิธีการใช้งาน</a></li>
          <li><a href="#">ติดต่อเรา</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h3>ติดต่อ</h3>
        <p><i class="fas fa-envelope"></i> info@allquiz.com</p>
        <p><i class="fas fa-phone"></i> 099-999-9999</p>
        <p><i class="fas fa-map-marker-alt"></i> มหาวิทยาลัยสงขลานครินทร์</p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>© 2025 Doralaikon_TH Allquizes | สงวนลิขสิทธิ์</p>
    </div>
  </footer>

  <script>
    // Google Sheets API configuration
    const sheetId = "1-7p30j2PR8oLeyJ02vMq1ut5IZ6iSh8zvMFS50w74Lc";
    const sheetRange = "Allquestions";
    const apiKey = "AIzaSyB4AyLjp-qzWqGm9uoKBeF2G8XUwk-eWPw";

    // Global variables for notifications
    let allNotifications = [];
    let closeToExpiryQuizzes = [];
    let expiredQuizzes = [];
    let latestUpdates = [];
    let activeNotificationTab = 'all';

    // ดึงข้อมูลจาก Google Sheets
    async function fetchSubjects() {
      const url = `https://sheets.googleapis.com/v4/spreadsheets/${sheetId}/values/${sheetRange}?key=${apiKey}`;
      try {
        const response = await fetch(url);
        const data = await response.json();
        if (data.values) {
          return data.values;
        } else {
          console.error("ไม่พบข้อมูลใน Google Sheets");
          return [];
        }
      } catch (error) {
        console.error("เกิดข้อผิดพลาดในการดึงข้อมูล:", error);
        return [];
      }
    }

    // แปลงรูปแบบวันที่
    function parseExpiryDate(expiryDate) {
      if (!expiryDate || expiryDate.trim() === '') return null;

      const dateFormats = [
        { regex: /^(\d{1,2})\/(\d{1,2})\/(\d{4}),\s*(\d{1,2}):(\d{2}):(\d{2})$/, parse: (d, m, y, h, min, sec) => `${y}-${m.padStart(2, '0')}-${d.padStart(2, '0')}T${h.padStart(2, '0')}:${min}:${sec}` },
        { regex: /^(\d{1,2})\/(\d{1,2})\/(\d{4}),\s*(\d{1,2}):(\d{2})$/, parse: (d, m, y, h, min) => `${y}-${m.padStart(2, '0')}-${d.padStart(2, '0')}T${h.padStart(2, '0')}:${min}:00` },
        { regex: /^(\d{1,2})\/(\d{1,2})\/(\d{4})$/, parse: (d, m, y) => `${y}-${m.padStart(2, '0')}-${d.padStart(2, '0')}T00:00:00` },
        { regex: /^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})$/, parse: (y, m, d, h, min, sec) => `${y}-${m}-${d}T${h}:${min}:${sec}` },
      ];

      for (const { regex, parse } of dateFormats) {
        const match = expiryDate.match(regex);
        if (match) {
          const formattedDate = parse(...match.slice(1));
          return new Date(formattedDate).getTime();
        }
      }

      return null;
    }

    // คำนวณเวลา countdown แบบปรับปรุง
    function calculateCountdown(expiryDate) {
      if (!expiryDate || expiryDate.trim() === '') return '';

      try {
        const [date, time] = expiryDate.split(", ");
        const [day, month, year] = date.split("/");

        // ตรวจสอบว่าเป็นปีปัจจุบันหรือปีถัดไป
        const now = new Date();
        let expiryYear = parseInt(year, 10);

        // ตรวจสอบว่าเป็นปีที่แล้วหรือไม่
        if (expiryYear < now.getFullYear()) {
          return 'ควิซนี้หมดเขตแล้ว';
        }

        // แปลงวันที่ให้เป็น ISO 8601
        const formattedDate = `${expiryYear}-${month.padStart(2, '0')}-${day.padStart(2, '0')}T${time || "00:00:00"}+07:00`;

        const endDate = new Date(formattedDate);
        const timeLeft = endDate.getTime() - now.getTime();

        if (timeLeft <= 0) return 'ควิซนี้หมดเขตแล้ว';

        const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
        const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
        
        // สร้างรูปแบบการแสดงผลที่ดีขึ้น
        let timeString = '';
        
        if (days > 0) {
          timeString += `${days} วัน `;
          if (hours > 0) timeString += `${hours} ชม.`;
          return timeString.trim();
        }
        
        if (hours > 0) {
          timeString += `${hours} ชม. `;
          if (minutes > 0) timeString += `${minutes} นาที`;
          return timeString.trim();
        }
        
        if (minutes > 0) {
          timeString += `${minutes} นาที `;
          if (seconds > 0) timeString += `${seconds} วินาที`;
          return timeString.trim();
        }
        
        return `${seconds} วินาที`;
      } catch (error) {
        console.error("Error calculating countdown:", error);
        return '';
      }
    }

    // อัปเดต countdown ทุกวินาที
    function updateCountdowns() {
      document.querySelectorAll('.countdown').forEach(el => {
        const expiryDate = el.getAttribute('data-expiry');
        if (!expiryDate) return;

        const countdown = calculateCountdown(expiryDate);

        if (countdown === 'ควิซนี้หมดเขตแล้ว') {
          el.className = 'status expired';
          el.innerText = countdown;
        } else {
          el.className = 'countdown';
          el.innerHTML = `<i class="fas fa-clock"></i> ${countdown}`;
        }
      });
    }

    // เปิด/ปิด Notification Center
    function toggleNotificationCenter() {
      const notificationCenter = document.getElementById('notification-center');
      notificationCenter.classList.toggle('active');
      
      // Animation for bell icon
      const bellIcon = document.querySelector('#notification-toggle i');
      bellIcon.classList.add('bell-ring');
      setTimeout(() => {
        bellIcon.classList.remove('bell-ring');
      }, 1000);
    }

    // สลับแท็บ notification
    function switchNotificationTab(tab) {
      activeNotificationTab = tab;
      
      // Update active tab highlighting
      document.querySelectorAll('.notification-tab').forEach(el => {
        el.classList.remove('active');
      });
      
      // Find and add active class to the clicked tab
      document.querySelector(`.notification-tab[data-tab="${tab}"]`).classList.add('active');
      
      // Update content based on selected tab
      updateNotificationContent();
    }

    // อัปเดตเนื้อหาการแจ้งเตือนตามแท็บที่เลือก
    function updateNotificationContent() {
      const notificationContent = document.getElementById('notification-content');
      let notifications = [];
      
      switch (activeNotificationTab) {
        case 'expiry':
          notifications = [...closeToExpiryQuizzes, ...expiredQuizzes];
          break;
        case 'update':
          notifications = latestUpdates;
          break;
        default: // 'all'
          notifications = allNotifications;
          break;
      }
      
      if (notifications.length === 0) {
        notificationContent.innerHTML = `
          <div class="no-notifications">
            <i class="far fa-bell-slash"></i>
            <p>ไม่มีการแจ้งเตือนใน${activeNotificationTab === 'all' ? 'ขณะนี้' : 'หมวดนี้'}</p>
          </div>
        `;
        return;
      }
      
      let html = '';
      
      // Group notifications by type for 'all' tab
      if (activeNotificationTab === 'all') {
        // Show expiring quizzes first
        if (closeToExpiryQuizzes.length > 0) {
          html += `
            <div class="notification-section">
              <h4 class="notification-section-title">
                <i class="fas fa-clock"></i> ควิซที่กำลังจะหมดเวลา
              </h4>
              <ul class="notification-list">
          `;
          
          closeToExpiryQuizzes.forEach(notification => {
            html += createNotificationItemHTML(notification, 'expiry');
          });
          
          html += `</ul></div>`;
        }
        
        // Show expired quizzes
        if (expiredQuizzes.length > 0) {
          html += `
            <div class="notification-section">
              <h4 class="notification-section-title">
                <i class="fas fa-exclamation-circle"></i> ควิซที่หมดเวลาแล้ว
              </h4>
              <ul class="notification-list">
          `;
          
          expiredQuizzes.forEach(notification => {
            html += createNotificationItemHTML(notification, 'expiry');
          });
          
          html += `</ul></div>`;
        }
        
        // Show latest updates
        if (latestUpdates.length > 0) {
          html += `
            <div class="notification-section">
              <h4 class="notification-section-title">
                <i class="fas fa-sync-alt"></i> อัพเดตล่าสุด
              </h4>
              <ul class="notification-list">
          `;
          
          latestUpdates.forEach(notification => {
            html += createNotificationItemHTML(notification, 'update');
          });
          
          html += `</ul></div>`;
        }
      } else {
        // For specific tabs, just show a list
        html += `<ul class="notification-list">`;
        notifications.forEach(notification => {
          html += createNotificationItemHTML(
            notification, 
            activeNotificationTab === 'expiry' ? 'expiry' : 'update'
          );
        });
        html += `</ul>`;
      }
      
      notificationContent.innerHTML = html;
    }

    // Helper function to create HTML for a notification item
    function createNotificationItemHTML(notification, type) {
      const isExpiry = type === 'expiry';
      
      return `
        <li class="notification-item ${type}">
          <div class="notification-title">
            <i class="fas ${isExpiry ? 'fa-exclamation-circle' : 'fa-check-circle'} notification-icon"></i>
            ${notification.quizName}
          </div>
          <div class="notification-desc">
            วิชา: ${notification.subject}
            ${notification.timeLeftInHours ? `<br>เหลือเวลา: <strong>${notification.timeLeftInHours} ชั่วโมง</strong>` : ''}
            ${notification.isExpired ? '<br><strong>หมดเวลาแล้ว</strong>' : ''}
          </div>
          <a href="${notification.quizLink}" target="_blank" class="notification-link">
            ดูรายละเอียด <i class="fas fa-external-link-alt"></i>
          </a>
        </li>
      `;
    }

    // เตรียมข้อมูลการแจ้งเตือน
    function prepareNotifications(subjects) {
      closeToExpiryQuizzes = [];
      expiredQuizzes = [];
      latestUpdates = [];
      
      subjects.forEach((row, index) => {
        if (index === 0) return; // ข้ามหัวตาราง
        
        const [subject, quizName, quizLink, quizDescription, expiryDate, status] = row || [];
        
        if (!subject || !quizName) return;
        
        // Check for expiry notifications
        if (expiryDate) {
          try {
            const now = new Date().getTime();
            const endDate = parseExpiryDate(expiryDate);
            
            if (endDate) {
              const timeLeftInMilliseconds = endDate - now;
              const timeLeftInHours = timeLeftInMilliseconds / (1000 * 60 * 60);
              
              if (timeLeftInHours > 0 && timeLeftInHours <= 24) {
                closeToExpiryQuizzes.push({
                  subject,
                  quizName,
                  quizLink,
                  timeLeftInHours: Math.ceil(timeLeftInHours)
                });
              } else if (timeLeftInHours <= 0) {
                const timePassedInMilliseconds = now - endDate;
                const timePassedInDays = timePassedInMilliseconds / (1000 * 60 * 60 * 24);
                
                if (timePassedInDays <= 1) {
                  expiredQuizzes.push({
                    subject,
                    quizName,
                    quizLink,
                    isExpired: true
                  });
                }
              }
            }
          } catch (error) {
            console.warn(`Error parsing expiry date for quiz: ${quizName}`, error);
          }
        }
        
        // Check for latest updates
        if (status && status.toLowerCase().includes("อัพเดตล่าสุด")) {
          latestUpdates.push({
            subject,
            quizName,
            quizLink,
            updateStatus: status
          });
        }
      });
      
      // Combine all notifications
      allNotifications = [...closeToExpiryQuizzes, ...expiredQuizzes, ...latestUpdates];
      
      // Update notification badge
      const notificationBadge = document.getElementById('notification-badge');
      if (allNotifications.length > 0) {
        notificationBadge.innerText = allNotifications.length;
        notificationBadge.style.display = 'flex';
      } else {
        notificationBadge.style.display = 'none';
      }
      
      // Update notification content
      updateNotificationContent();
    }

    // สร้างการ์ดรายวิชา
    async function initializeSubjects() {
      const subjects = await fetchSubjects();
      const subjectList = document.getElementById('subject-list');
      const subjectMap = {};
      
      // สร้างโครงสร้างข้อมูลรายวิชา
      subjects.forEach((row, index) => {
        if (index === 0) return; // ข้ามหัวตาราง
        
        const [subject, quizName, quizLink, quizDescription, expiryDate, status] = row || [];
        
        if (subject && subject.trim() !== "") {
          if (!subjectMap[subject]) {
            subjectMap[subject] = [];
          }
          
          subjectMap[subject].push({
            quizName,
            quizLink,
            quizDescription,
            expiryDate,
            status
          });
        }
      });
      
      // เตรียมข้อมูลการแจ้งเตือน
      prepareNotifications(subjects);
      
      // แสดงการ์ดรายวิชา
      subjectList.innerHTML = "";
      Object.keys(subjectMap).forEach(subject => {
        const quizzes = subjectMap[subject];
        const subjectCard = document.createElement('div');
        subjectCard.className = 'subject-card';
        
        // เลือกไอคอนที่เหมาะสมตามชื่อวิชา
        let icon = 'fa-book';
        if (subject.toLowerCase().includes('คอมพิวเตอร์') || subject.toLowerCase().includes('computer')) {
          icon = 'fa-laptop-code';
        } else if (subject.toLowerCase().includes('คณิตศาสตร์') || subject.toLowerCase().includes('math')) {
          icon = 'fa-calculator';
        } else if (subject.toLowerCase().includes('วิทยาศาสตร์') || subject.toLowerCase().includes('science')) {
          icon = 'fa-flask';
        } else if (subject.toLowerCase().includes('ภาษา') || subject.toLowerCase().includes('language')) {
          icon = 'fa-language';
        }
        
        subjectCard.innerHTML = `
          <i class="fas ${icon}"></i>
          <strong>${subject}</strong>
        `;
        
        if (quizzes.every(quiz => !quiz.quizName)) {
          subjectCard.innerHTML += `<div class="waiting-for-update">รออัพเดต</div>`;
        } else {
          // นับจำนวนควิซที่มี
          const availableQuizzes = quizzes.filter(quiz => quiz.quizName && quiz.quizLink).length;
          if (availableQuizzes > 0) {
            subjectCard.innerHTML += `<div class="quiz-count">${availableQuizzes} ควิซ</div>`;
          }
          
          subjectCard.onclick = () => showQuizzes(subject, quizzes);
        }
        
        subjectList.appendChild(subjectCard);
      });
    }

    // แสดงควิซในรายวิชาที่เลือก
    function showQuizzes(subject, quizzes) {
      document.getElementById('subjects').style.display = 'none';
      document.getElementById('quiz-list').style.display = 'block';
      document.getElementById('subject-title').innerText = `ควิซในวิชา ${subject}`;
      
      const quizContainer = document.getElementById('quiz-container');
      quizContainer.innerHTML = '';
      
      quizzes.forEach(({ quizName, quizLink, quizDescription, expiryDate, status }) => {
        if (!quizName) return; // ข้ามควิซที่ไม่มีชื่อ
        
        const quizCard = document.createElement('div');
        quizCard.className = 'quiz-card';
        
        // เลือกไอคอนตามสถานะ
        let icon = 'fa-file-alt';
        if (status && status.toLowerCase().includes('อัพเดตล่าสุด')) {
          icon = 'fa-sync-alt';
        } else if (expiryDate && calculateCountdown(expiryDate) === 'ควิซนี้หมดเขตแล้ว') {
          icon = 'fa-hourglass-end';
        } else if (expiryDate) {
          icon = 'fa-hourglass-half';
        }
        
        quizCard.innerHTML = `
          <i class="fas ${icon}"></i>
          <strong>${quizName}</strong>
        `;
        
        if (quizDescription) {
          const description = document.createElement('div');
          description.className = 'quiz-description';
          description.innerHTML = `<strong>คำอธิบาย:</strong><br> ${quizDescription}`;
          description.style.whiteSpace = 'pre-line';
          quizCard.appendChild(description);
        }
        
        // แสดงสถานะถ้ามี
        if (status) {
          const statusElement = document.createElement('div');
          statusElement.className = 'status';
          
          if (status.toLowerCase().includes('อัพเดตล่าสุด')) {
            statusElement.classList.add('success');
          } else if (status.toLowerCase().includes('รออัพเดต') || status.toLowerCase().includes('ปิดปรับปรุง')) {
            statusElement.classList.add('waiting-for-update');
          }
          
          statusElement.innerText = status;
          quizCard.appendChild(statusElement);
        } 
        // แสดงเวลาถ้ามี expiryDate
        else if (expiryDate) {
          const countdown = document.createElement('div');
          countdown.className = 'countdown';
          countdown.setAttribute('data-expiry', expiryDate);
          quizCard.appendChild(countdown);
        }
        
        // เพิ่มปุ่มดูเฉลยถ้ามีลิงก์
        if (quizLink) {
          const answerButton = document.createElement('a');
          answerButton.className = 'answer-button';
          answerButton.href = quizLink;
          answerButton.target = '_blank';
          answerButton.innerHTML = `<i class="fas fa-external-link-alt"></i> ดูเฉลย`;
          quizCard.appendChild(answerButton);
        } else {
          // แสดง "รออัพเดต" ถ้าไม่มีลิงก์
          const waitingUpdate = document.createElement('div');
          waitingUpdate.className = 'waiting-for-update';
          waitingUpdate.innerText = 'รออัพเดต';
          quizCard.appendChild(waitingUpdate);
        }
        
        quizContainer.appendChild(quizCard);
      });
      
      updateCountdowns();
    }

    // กลับไปยังหน้ารายวิชา
    function goBack() {
      document.getElementById('quiz-list').style.display = 'none';
      document.getElementById('subjects').style.display = 'block';
    }

    // ตั้งค่า event handlers
    document.addEventListener("DOMContentLoaded", () => {
      const popupOverlay = document.getElementById("popup-overlay");
      const closePopup = document.getElementById("close-popup");
      const startRedirect = document.getElementById("start-redirect");
      const backButton = document.getElementById("back-button");
      const notificationCenter = document.getElementById("notification-center");
      const notificationTabs = document.querySelectorAll(".notification-tab");

      // ตั้งค่าเวลาตามเวลาประเทศไทย (UTC+7)
      const now = new Date();
      const bangkokOffset = 7 * 60 * 60 * 1000; // ชดเชย 7 ชั่วโมงเป็นมิลลิวินาที
      const bangkokTime = new Date(now.getTime() + bangkokOffset);

      // กำหนดช่วงเวลาเปิด Popup
      const startDate = new Date("2025-03-19T12:00:00+07:00");
      const endDate = new Date("2025-03-19T23:59:59+07:00");

      // แสดง Popup หากอยู่ในช่วงเวลา
      if (bangkokTime >= startDate && bangkokTime <= endDate) {
        popupOverlay.style.display = "flex";
      } else {
        popupOverlay.style.display = "none";
      }

      // ปิด Popup เมื่อกดปุ่ม
      closePopup.addEventListener("click", () => {
        popupOverlay.style.display = "none";
      });

      // เมื่อกดปุ่มเริ่ม Redirect
      startRedirect.addEventListener("click", () => {
        popupOverlay.style.display = "none";
        
        setTimeout(() => {
          window.location.href = "https://doralaikon.online/allquestions/course/ธรรมชาติบำบัด/ข้อสอบปลายภาคธรรมชาติบำบัด"; // URL ของข้อสอบ
        }, 1000);
      });
      
      // ปุ่มย้อนกลับ
      backButton.addEventListener("click", goBack);

      // แท็บการแจ้งเตือน
      notificationTabs.forEach(tab => {
        tab.addEventListener("click", (e) => {
          const tabType = e.currentTarget.getAttribute('data-tab');
          switchNotificationTab(tabType);
        });
      });

      // ปิดการแจ้งเตือนเมื่อคลิกนอกพื้นที่
      document.addEventListener("click", (e) => {
        const notificationToggle = document.getElementById("notification-toggle");
        if (notificationCenter.classList.contains("active") && 
            !notificationCenter.contains(e.target) && 
            e.target !== notificationToggle && 
            !notificationToggle.contains(e.target)) {
          notificationCenter.classList.remove("active");
        }
      });
    });

    // อัปเดต countdown ทุกวินาที
    setInterval(updateCountdowns, 1000);
    
    // เริ่มต้นเว็บไซต์
    initializeSubjects();
  </script>
</body>
</html>
